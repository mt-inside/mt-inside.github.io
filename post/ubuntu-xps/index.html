<!DOCTYPE html>
<html lang="en-gb" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Installing Ubuntu on a Dell XPS 15 (9560) &middot; Matt Turner&#39;s Blog</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://blog.mt165.co.uk/favicon.ico" />
    <link rel="canonical" href="https://blog.mt165.co.uk/post/ubuntu-xps/" />

     <meta name="description" content="How to install Ubuntu on a Dell XPS 15&#34; (9560)" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://blog.mt165.co.uk/images/ubuntu-xps.png"/>
    
 
    <meta name="twitter:title" content="Installing Ubuntu on a Dell XPS 15 (9560)"/>
    <meta name="twitter:description" content="How to install Ubuntu on a Dell XPS 15&#34; (9560)"/>
    <meta name="twitter:url" content="https://blog.mt165.co.uk/post/ubuntu-xps/" />
    <meta name="twitter:site" content="@mt165pro"/>

    <meta property="og:site_name" content="Matt Turner&#39;s Blog" />
    <meta property="og:title" content="Installing Ubuntu on a Dell XPS 15 (9560) &middot; Matt Turner&#39;s Blog" />
    <meta property="og:url" content="https://blog.mt165.co.uk/post/ubuntu-xps/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="How to install Ubuntu on a Dell XPS 15&#34; (9560)" />

    <meta property="article:published_time" content="2018-02-24T00:00:00Z" />
    <meta property="article:tag" content="Linux" /><meta property="article:tag" content="Ubuntu" /><meta property="article:tag" content="Dell XPS" />

    <meta property="og:image" content="https://blog.mt165.co.uk/images/ubuntu-xps.png"/>


    <meta name="generator" content="Hugo 0.36.1" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://blog.mt165.co.uk/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://blog.mt165.co.uk/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="../../">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="">||</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../../post/">Blog</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../../speech/">Speaking</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="">|</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../../categories/">By Category</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../../tags/">By Tag</a>
            </li>
        
            <li class="nav-current" role="menuitem">
              <a href="../../post/"></a>
            </li>
        
            <li class="" role="menuitem">
              <a href="../../speech/"></a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    <a class="social-link social-link-tw" href="https://twitter.com/mt165pro" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg></a>

                    <a class="social-link" href="https://github.com/mt-inside" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    <a class="social-link" href="https://www.linkedin.com/in/mt165" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 50 512 512"><path d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z" /></svg></a>

                    
        </div>  
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2018-02-24">24 February 2018</time>
                <span class="date-divider">/</span> <a href="https://blog.mt165.co.uk/tags/linux/">#Linux</a>&nbsp;<a href="https://blog.mt165.co.uk/tags/ubuntu/">#Ubuntu</a>&nbsp;
        </section>
        <h1 class="post-full-title">Installing Ubuntu on a Dell XPS 15 (9560)</h1>
    </header>
    
    <figure class="post-full-image" style="background-image: url(https://blog.mt165.co.uk/images/ubuntu-xps.png)">
    </figure>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <p>In this post I&rsquo;ll details the steps I (eventually) worked out to install Ubuntu 18.04 on a late 2017 Dell XPS 15&rdquo;.</p>

<p></p>

<p>With thanks to https://github.com/rcasero/doc/wiki/Ubuntu-linux-on-Dell-XPS-15-(9560) and many other great Google hits. However, none of the instructions I found quite covered everything. This may well be because I tried a super pre-release version of Ubuntu, and by the time you read this is might all be fixed.</p>

<p>I assume you know how to install Ubuntu on a sunny day. This post will talk about building a pure Ubuntu system; I don’t preserve the factory Windows or its bootloader. (I intend to try to get clean Windows booting again from an external disk; watch this space).</p>

<p>Ubuntu version: <strong>18.04</strong>. <em>Yes, at time of writing (Jan 18) this is very per-release, and rcasero reports lots of problems being introduced at 17.10. However, I’m a developer and need cutting-edge package versions. This is band new hardware, support for which won’t necessarily get back-ported. I also hit a couple of kernel bugs, the best bet for which seemed to be to fail forwards.</em></p>

<hr />

<p>So; to install:</p>

<ul>
<li><strong>Take a backup of the factory Windows.</strong> <em>No, seriously. I’m not one for them normally, but so much can and did go wrong for me. You could be weeks with an expensive paperweight if you have to fix it the hard way. Not a good look if your company owns the machine. https://www.veeam.com/windows-endpoint-server-backup-free.html</em></li>
<li><strong>Disable VT-X and VT-D in the UEFI.</strong> <em>Otherwise you’ll get “rcu_sched detected expedited stalls on cpus/tasks”. Google reports this and fingers an X58-era firmware bug with IOMMU DMA remapping. This is a good 10 years newer than X58 but I guess it’s a different processor erratum in the same area, because this seemed to fix it.</em></li>
<li><strong>Boot the installer with kernel cmdline option “nouveau.runpm=0”.</strong> <em>Otherwise you’ll get almost total freezing, with the odd moment of CPU progress now and again. This one I can confirm by experiment. Apparently anything that wakes the nVidia chipset from sleep causes these freezes to start. That includes running lspci to find out what the laptop is made of, which is obviously the first thing you do after you’ve bought one. Also running Chrome, which uses gfx acceleration (WebGL?). Oh, and actually letting it sleep and wake.</em></li>
<li><strong>dd /dev/zero over the first 512MB of the main /dev/nvme0n1 disk.</strong> <em>Otherwise the installer will tell you</em> “the machine’s firmware has started the installer in UEFI mode but it looks like there may be existing operating systems installed using BIOS compatibility mode. If you continue to install Debian in UEFI mode, it might be difficult to reboot the machine into any BIOS-mode operating system later”. <em>The problem is that clicking either of the buttons on that dialog does nothing and that modal dialog stays firmly put. I couldn’t even kill the installer with signal 9; I assume something was stuck in disk sleep. My best solution was to wipe enough of the disk that Ubuntu didn’t detect the “legacy” Windows install. 512 bytes (MBR partition table and stage 1 bootblocks) didn’t do it. However, setting “count=1M” in anger did, even though there are partition table backups at the end of the disk. Meh. idk. Why the factory Windows was installed or miss-detected as BIOS-mode I don’t know either. A shadow protection MBR partition table maybe?</em></li>
<li><strong>If you want a different filesystem, run the installer once with default disk settings, then go over it again.</strong> <em>Otherwise you’ll get “Can’t install grub.” Totally opaque, with no meaningful error message. In my case I wanted btrfs for / so I chose manual disk partitioning. I dutifully made an EFI System Partition (512MB, usage “EFI”), and set the rest as btrfs root. Grub wouldn’t install. The only smoking gun I saw was that it’d formatted the ESP partition ext4; I swear it has be to vfat. Anyway, run once with default disk settings. This will wipe Windows (in addition to your dd attack above), make a vfat ESP, and successfully install grub. The system will boot but your filesystem will be a bit sub-par. Now run the installer again, chose manual partitioning, delete the rootfs and re-add as btrfs, but don’t touch the EPS. The installer seems to find the EFI boot machinery fine and update it (or maybe it doesn’t even — the path into / is the same I guess), but it doesn&rsquo;t reformat it at least.</em></li>
</ul>

<hr />

<p>After installation:</p>

<ul>
<li><strong>Re-enable VT-X and VT-D.</strong> <em>The installation medium doesn’t inject any microcode into the CPU, and CPU bugs were suspected for this one. The installed system does do this, out of the box, nothing to install. The Ubuntu 18.04 intel-microcode package even has microcode for this very new processor (family 06, model 9E, stepping 09). Yes, it’s true that the UEFI also contains a microcode blob which it loads at boot, and I updated my BIOS to the latest 1.5 version which was mere days old at time of writing, but that didn’t do it. For reference: Ubuntu was loading version 0x80.</em></li>
<li><strong>Fix graphics driver Power Management issues.</strong> <em>Essentially, the current nouveau driver is buggy with respect to the GTX1050 / GP107M in the laptop. This is a known issue. I guess your options are as follows. FWIW I chose 2, and while I don&rsquo;t play games, I haven&rsquo;t noticed any graphics performance problems on the desktop. Also the battery life is now awesome. Either way, confirm by running <code>lspci</code> and not getting a lockup.</em>

<ol>
<li>Wait it out, and don’t trigger an nVidia hardware wakeup in the mean-time</li>
<li>Disable that chip completely in the UEFI (seemingly not possible) or kernel (prevent the driver from binding with <code>modprobe.blacklist=nouveau</code> in <code>/etc/default/grub</code>)</li>
<li>Switch to the nvidia binary blob drivers (only supports Xinerama, no XRandR, so bad for external monitors and projectors. Also, yanno, Closed Source.)</li>
<li>Make the <code>nouveau.runpm=0</code> kernel cmdline permanent by adding it to <code>/etc/default/grub</code></li>
</ol></li>
</ul>

<p>HTH,</p>

<p>matt</p>    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://blog.mt165.co.uk/images/avatar.jpg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://blog.mt165.co.uk/">Matt Turner</a></h4>
                <p>Nerd</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://blog.mt165.co.uk/images/P7200043.jpg);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash; Matt Turner&#39;s Blog &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="https://blog.mt165.co.uk/tags/linux/">#Linux</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
                      
        
          <li><a href="https://blog.mt165.co.uk/post/spectrum-of-mutability/">A Spectrum of Mutability</a></li>            
        
          <li><a href="https://blog.mt165.co.uk/post/immutable-definitions/">Immutable Definitions</a></li>            
        
          <li><a href="https://blog.mt165.co.uk/post/latching-mutations-gitops/">Latching Mutations with GitOps</a></li>            
        
          <li><a href="https://blog.mt165.co.uk/post/windows-xps/">Installing Windows 10 on a Dell XPS 15 (9560) using an external disk</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="https://blog.mt165.co.uk/tags/linux/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://blog.mt165.co.uk/post/windows-xps/">
      <div class="post-card-image" style="background-image: url(https://blog.mt165.co.uk/images/win10-xps.png)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://blog.mt165.co.uk/post/windows-xps/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #Windows 
              #Windows 10 
              #Dell XPS  </span>
              
              <h2 class="post-card-title">Installing Windows 10 on a Dell XPS 15 (9560) using an external disk</h2>
          </header>
          <section class="post-card-excerpt">
               
                <p>Installing Windows 10 on an external disk isn&rsquo;t easy. Throw in new, laptop hardware and it&rsquo;s a nightmare.</p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://blog.mt165.co.uk/images/avatar.jpg" alt="Author" />
          <span class="post-card-author"><a href="../../">Matt Turner</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://blog.mt165.co.uk/post/latching-mutations-gitops/">
      <div class="post-card-image" style="background-image: url(https://blog.mt165.co.uk/defimg/1.jpg)"></div>
    </a>    
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://blog.mt165.co.uk/post/latching-mutations-gitops/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #Infrastructure 
              #Cloud 
              #Immutable Architecture  </span>
              
              <h2 class="post-card-title">Latching Mutations with GitOps</h2>
          </header>
          <section class="post-card-excerpt">
               
                <p>A practical approach to following GitOps principles, while allowing for effective DR procedures and auditing</p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://blog.mt165.co.uk/images/avatar.jpg" alt="Author" />
          <span class="post-card-author"><a href="../../">Matt Turner</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://blog.mt165.co.uk/">
      
      <span>Matt Turner&#39;s Blog</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Installing Ubuntu on a Dell XPS 15 (9560)</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Installing%20Ubuntu%20on%20a%20Dell%20XPS%2015%20%289560%29&amp;url=https%3a%2f%2fblog.mt165.co.uk%2fpost%2fubuntu-xps%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.mt165.co.uk%2fpost%2fubuntu-xps%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="../../">Matt Turner&#39;s Blog</a> © Matt Turner 2017-2018 <br>
      <span style="font-size: 0.8em; color: #555;">Hugo port of <a href="https://github.com/TryGhost/Casper">Casper 2.1.7</a> by <a href="https://www.telematika.org">EM</a></span>
    </section>
    <nav class="site-footer-nav">
        <a href="../../">Latest Posts</a>
        
        <a href="https://twitter.com/mt165pro" target="_blank" rel="noopener">Twitter</a>
        <a href="https://github.com/mt-inside" target="_blank" rel="noopener">Github</a>
        <a href="https://www.linkedin.com/in/mt165" target="_blank" rel="noopener">LinkedIn</a>
        
    </nav>  
  </div>
</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://blog.mt165.co.uk/js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>



    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
